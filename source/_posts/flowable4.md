---
title: Flowable（四）流程相关知识点
date: 2020-07-21 20:11:46
categories: Flowable
tag: [Flowable]
---

<!-- more -->

## 流程部署

流程部署涉及到的表有 `act_re_deployment`， `act_re_procdef`,`act_ge_bytearry`,`act_ge_property`

* act_re_deployment（部署对象表）：存放流程定义的显示名和部署时间，每部署一次增加一条记录
* act_re_procdef（流程定义表）：存放流程定义的属性信息，部署每个新的流程都会在这张表中添加一条记录，当流程定义的 key 相同时，使用的是版本升级
* act_ge_bytearry（资源文件表）：存放流程定义相关的部署信息，即流程定义文档的存放处。每部署一次会增加两条记录，一条是关于 bpmn 规则文件，一条是生成的流程图片（如果部署时只指定了 bpmn 一个文件，flowable 会在部署时解析 bpmn 文件内容自动生成流程图）。两个文件都是以二进制形式存储在数据库中
* act_ge_property：主键生成策略表

## 流程定义

### 流程定义

流程的一系列规则定义

### 流程实例

代表流程定义的执行实例，例如：员工 A 请假一天，他就必须发出一个请假流程实例申请

一个流程实例表示了所有的运行节点，我们可以利用这个对象来了解当前流程实例的进度等信息。流程实例就表示一个流程从开始到结束的最大流程分支，即一个流程中流程实例只有一个。流程实例通常也叫做执行实例的根节点，流程实例和流程定义为一对多的关系

执行实例（ProcessInstance Extends Execution），启动流程的时候会首先创建流程实例，然后创建执行实例；流程运转中永远执行的是自己对应的执行实例；当所有的执行实例按照规则执行完毕后，则实例随之结束；flowable 用这个对象去描述流程执行的每一个节点；流程按照流程定义的规则执行一次的过程，就可以表示执行对象 Execution。一个流程中，执行对象可以存着多个，但是实例只能有一个

## 节点

### 开始节点

开始节点代表一个规则的开始。在一个规则文件中，开始节点只能是一个，不能是多个。如果是多个则部署的时候会报错。子流程及引用流程也是如此。开始节点只能是一个。启动流程的时候，从开始节点让流程实例运行

### 结束节点

结束节点代表一个规则的结束。在一个规则文件中，结束节点可以是多个。如果实例运转到结束节点的时候，则表示当前的执行实例要结束，则流程也将随之结束

